package handlers;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class TriviaHandler extends AsistantSentenceHandler {

	private String[] trivias = {
			"Cleopatra vivió más cerca de la invención del iPhone que de la construcción de la Gran Pirámide.",
			"Rusia tiene una superficie más grande que Plutón.",
			"Arabia Saudí importa camellos de Australia.",
			"El nombre completo del juguete de Barbie es Barbara Millicent Roberts.",
			"Woody, de Toy Story, tiene un nombre completo y es Woody Pride.",			
			"Las zanahorias eran originalmente de color púrpura.",
			"El corazón de una ballena azul es tan grande que un ser humano podría nadar a través de las arterias.",
			"Una maquina expendedora puede matarte más fácilmente que un tiburón.",
			"La Universidad de Oxford es más antigua que el imperio azteca.",
			"Francia seguía ejecutando personas con una guillotina cuando la primera película de Star Wars se estrenó.",
			"Los armadillos casi siempre dan a luz a cuatrillizos idénticos.",
			"Eduard Punset es en realidad más viejo que el pan de molde.",
			"El unicornio es el animal nacional de Escocia."
	};
	
	private int triviaIndex = 0;	
	
	
	public TriviaHandler(){
		triviaIndex = 0;
		patron = Pattern.compile(".*(?:dame|quiero).*(?:trivia|interesante|interesantes|importante|importantes)");
	}	
	
	@Override
	public String giveAnswer(String mensaje, String nombreUsuario) {	
		Matcher matcher = patron.matcher(mensaje);		
	    if (matcher.matches()) {	    	
	    	triviaIndex ++;
			if(triviaIndex == trivias.length){
				triviaIndex = 0;
				return trivias[trivias.length - 1];
			}			
			return trivias[triviaIndex - 1];
	    	
	    } else 
	    	return this.nextHandler.giveAnswer(mensaje, nombreUsuario);	
		
	}	
}
